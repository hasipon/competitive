D
n以下の最大の素数pを取る。n-pは十分小さい(最大282)ので、O(√n)の素数判定で間に合う。
あとは、n-pを2つ以下の素数に分ける。

E
pの各要素を適切な位置に移動していくこと考える。
各要素に関して一方向のみに移動するのが最短であり、そのような操作は存在する。
k = n .. 1に対して順に移動する。
kより大きい要素はソート済みなのでkは右へ移動したい。
kのある位置pより右の要素のうち、移動先がp以下のものをひとつ選び(鳩の巣原理より存在がいえる)、それらを入れ替えることを繰り返す。
